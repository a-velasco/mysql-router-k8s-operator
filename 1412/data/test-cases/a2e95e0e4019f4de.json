{"uid":"a2e95e0e4019f4de","name":"test_build_deploy_and_relate","fullName":"tests.integration.test_tls#test_build_deploy_and_relate","historyId":"73560a0eeee564ec5aa7616125eaee25","time":{"start":1717983550119,"stop":1717983552268,"duration":2149},"description":"Test encryption when backend database is using TLS.","descriptionHtml":"<p>Test encryption when backend database is using TLS.</p>\n","status":"broken","statusMessage":"juju.errors.JujuError: ['Charm feature requirements cannot be met:\\n  - charm requires at least one of the following:\\n    - charm requires all of the following:\\n      - charm requires feature \"juju\" (version < 3.0.0) but model currently supports version 3.1.6\\n    - charm requires all of the following:\\n      - charm requires feature \"juju\" (version >= 3.4.3) but model currently supports version 3.1.6\\n\\nFeature descriptions:\\n  - \"juju\": the version of Juju used by the model\\n\\nFor additional information please see: https://juju.is/docs/olm/supported-features']","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 493, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 115, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 152, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 114, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1788, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 493, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 115, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 152, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 114, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/tests/integration/test_tls.py\", line 50, in test_build_deploy_and_relate\n    await ops_test.model.deploy(\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 1816, in deploy\n    return await self._deploy(\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2096, in _deploy\n    result = await app_facade.Deploy(applications=[app])\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/client/facade.py\", line 486, in wrapper\n    reply = await f(*args, **kwargs)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/client/_client17.py\", line 1051, in Deploy\n    reply = await self.rpc(msg)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/client/facade.py\", line 659, in rpc\n    result = await self.connection.rpc(msg, encoder=TypeEncoder)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/client/connection.py\", line 692, in rpc\n    raise errors.JujuError(err_results)\njuju.errors.JujuError: ['Charm feature requirements cannot be met:\\n  - charm requires at least one of the following:\\n    - charm requires all of the following:\\n      - charm requires feature \"juju\" (version < 3.0.0) but model currently supports version 3.1.6\\n    - charm requires all of the following:\\n      - charm requires feature \"juju\" (version >= 3.4.3) but model currently supports version 3.1.6\\n\\nFeature descriptions:\\n  - \"juju\": the version of Juju used by the model\\n\\nFor additional information please see: https://juju.is/docs/olm/supported-features']","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop","time":{"start":1717983549848,"stop":1717983549849,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1717983549849,"stop":1717983549849,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1717983549849,"stop":1717983550118,"duration":269},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1717983550119,"stop":1717983550119,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test encryption when backend database is using TLS.","status":"broken","statusMessage":"juju.errors.JujuError: ['Charm feature requirements cannot be met:\\n  - charm requires at least one of the following:\\n    - charm requires all of the following:\\n      - charm requires feature \"juju\" (version < 3.0.0) but model currently supports version 3.1.6\\n    - charm requires all of the following:\\n      - charm requires feature \"juju\" (version >= 3.4.3) but model currently supports version 3.1.6\\n\\nFeature descriptions:\\n  - \"juju\": the version of Juju used by the model\\n\\nFor additional information please see: https://juju.is/docs/olm/supported-features']","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 493, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 115, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 152, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 114, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1788, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 493, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 115, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 152, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 114, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/tests/integration/test_tls.py\", line 50, in test_build_deploy_and_relate\n    await ops_test.model.deploy(\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 1816, in deploy\n    return await self._deploy(\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2096, in _deploy\n    result = await app_facade.Deploy(applications=[app])\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/client/facade.py\", line 486, in wrapper\n    reply = await f(*args, **kwargs)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/client/_client17.py\", line 1051, in Deploy\n    reply = await self.rpc(msg)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/client/facade.py\", line 659, in rpc\n    result = await self.connection.rpc(msg, encoder=TypeEncoder)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/client/connection.py\", line 692, in rpc\n    raise errors.JujuError(err_results)\njuju.errors.JujuError: ['Charm feature requirements cannot be met:\\n  - charm requires at least one of the following:\\n    - charm requires all of the following:\\n      - charm requires feature \"juju\" (version < 3.0.0) but model currently supports version 3.1.6\\n    - charm requires all of the following:\\n      - charm requires feature \"juju\" (version >= 3.4.3) but model currently supports version 3.1.6\\n\\nFeature descriptions:\\n  - \"juju\": the version of Juju used by the model\\n\\nFor additional information please see: https://juju.is/docs/olm/supported-features']","steps":[],"attachments":[{"uid":"58242dcbbe89fa1e","name":"log","source":"58242dcbbe89fa1e.txt","type":"text/plain","size":299}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1717983552280,"stop":1717983552280,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1717983552284,"stop":1717983560118,"duration":7834},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1717983560119,"stop":1717983560119,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1717983560119,"stop":1717983560119,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1717983560119,"stop":1717983560119,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration"},{"name":"suite","value":"test_tls"},{"name":"host","value":"fv-az711-773"},{"name":"thread","value":"12595-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.test_tls"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":3,"skipped":0,"passed":9,"unknown":0,"total":12},"items":[{"uid":"956e4c3d2adf01b3","reportUrl":"../1411//#testresult/956e4c3d2adf01b3","status":"broken","statusDetails":"juju.errors.JujuError: ['Charm feature requirements cannot be met:\\n  - charm requires at least one of the following:\\n    - charm requires all of the following:\\n      - charm requires feature \"juju\" (version < 3.0.0) but model currently supports version 3.1.6\\n    - charm requires all of the following:\\n      - charm requires feature \"juju\" (version >= 3.4.3) but model currently supports version 3.1.6\\n\\nFeature descriptions:\\n  - \"juju\": the version of Juju used by the model\\n\\nFor additional information please see: https://juju.is/docs/olm/supported-features']","time":{"start":1717897013030,"stop":1717897014662,"duration":1632}},{"uid":"ea21fcac9b30ddf6","reportUrl":"../1410//#testresult/ea21fcac9b30ddf6","status":"broken","statusDetails":"juju.errors.JujuError: ['Charm feature requirements cannot be met:\\n  - charm requires at least one of the following:\\n    - charm requires all of the following:\\n      - charm requires feature \"juju\" (version < 3.0.0) but model currently supports version 3.1.6\\n    - charm requires all of the following:\\n      - charm requires feature \"juju\" (version >= 3.4.3) but model currently supports version 3.1.6\\n\\nFeature descriptions:\\n  - \"juju\": the version of Juju used by the model\\n\\nFor additional information please see: https://juju.is/docs/olm/supported-features']","time":{"start":1717810623950,"stop":1717810626063,"duration":2113}},{"uid":"b7ea9a18d9c5969c","reportUrl":"../1405//#testresult/b7ea9a18d9c5969c","status":"passed","time":{"start":1717724236570,"stop":1717724331454,"duration":94884}},{"uid":"111ca1e5b6c18c9e","reportUrl":"../1401//#testresult/111ca1e5b6c18c9e","status":"passed","time":{"start":1717637978518,"stop":1717638073823,"duration":95305}},{"uid":"20ebf65fe0418fe4","reportUrl":"../1400//#testresult/20ebf65fe0418fe4","status":"passed","time":{"start":1717551379890,"stop":1717551482846,"duration":102956}},{"uid":"a03d8124b3c26023","reportUrl":"../1396//#testresult/a03d8124b3c26023","status":"passed","time":{"start":1717465012599,"stop":1717465116041,"duration":103442}},{"uid":"fa84d83bc374c5c6","reportUrl":"../1395//#testresult/fa84d83bc374c5c6","status":"passed","time":{"start":1717378605199,"stop":1717378699170,"duration":93971}},{"uid":"685f3e352c6e427e","reportUrl":"../1394//#testresult/685f3e352c6e427e","status":"passed","time":{"start":1717292167570,"stop":1717292260842,"duration":93272}},{"uid":"efe27e51b9279ba5","reportUrl":"../1393//#testresult/efe27e51b9279ba5","status":"passed","time":{"start":1717205829308,"stop":1717205933501,"duration":104193}},{"uid":"36ff7cbe81294a6","reportUrl":"../1392//#testresult/36ff7cbe81294a6","status":"passed","time":{"start":1717119406554,"stop":1717119500454,"duration":93900}},{"uid":"51fe40a33c101e28","reportUrl":"../1390//#testresult/51fe40a33c101e28","status":"passed","time":{"start":1717033290819,"stop":1717033383767,"duration":92948}}]},"tags":["asyncio","abort_on_fail","group(1)"]},"source":"a2e95e0e4019f4de.json","parameterValues":[]}